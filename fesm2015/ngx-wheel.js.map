{"version":3,"file":"ngx-wheel.js","sources":["ng://ngx-wheel/lib/ngx-wheel.component.ts","ng://ngx-wheel/lib/ngx-wheel.module.ts","ng://ngx-wheel/public-api.ts","ng://ngx-wheel/ngx-wheel.ts"],"sourcesContent":["import { Component, OnInit, Input, AfterViewInit, Output, EventEmitter } from '@angular/core';\nexport interface Item {\n  text: string,\n  fillStyle: string,\n  id: any,\n}\nexport enum TextAlignment {\n  INNER = 'inner',\n  OUTER = 'outer',\n  CENTER = 'center',\n}\n\nexport enum TextOrientation {\n  HORIZONTAL = 'horizontal',\n  VERTICAL = 'vertical',\n  CURVED = 'curved',\n}\n\n@Component({\n  selector: 'ngx-wheel',\n  template: `\n    <canvas (click)='!disableSpinOnClick && spin()' id='canvas' [width]='width' [height]='height'>\n        Canvas not supported, use another browser.\n    </canvas>\n`,\n  styles: [\n  ]\n})\nexport class NgxWheelComponent implements OnInit, AfterViewInit {\n\n  constructor() { }\n\n  @Input() height: number;\n  @Input() idToLandOn: any;\n  @Input() width: number;\n  @Input() items: Item[];\n  @Input() spinDuration: number;\n  @Input() spinAmount: number;\n  @Input() innerRadius: number;\n  @Input() pointerStrokeColor: string;\n  @Input() pointerFillColor: string;\n  @Input() disableSpinOnClick: boolean;\n  @Input() textOrientation: TextOrientation\n  @Input() textAlignment: TextAlignment\n  \n\n  @Output() onSpinStart: EventEmitter<any> = new EventEmitter();\n  @Output() onSpinComplete: EventEmitter<any> = new EventEmitter();\n\n  wheel: any\n  completedSpin: boolean = false;\n  isSpinning: boolean = false;\n\n  reset() {\n    this.wheel.stopAnimation(false);\n    this.wheel.rotationAngle = 0;\n    this.wheel.ctx.clearRect(0, 0, this.wheel.ctx.canvas.width, this.wheel.ctx.canvas.height);\n    this.isSpinning = false \n    this.completedSpin = false \n    this.ngAfterViewInit()\n  }\n\n  ngOnInit(): void {\n  }\n\n  spin() {\n    if (this.completedSpin || this.isSpinning) return\n    this.isSpinning = true\n    this.onSpinStart.emit(null)\n    const segmentToLandOn = this.wheel.segments.filter(x => !!x).find(({ id }) => this.idToLandOn === id)\n    const segmentTheta = segmentToLandOn.endAngle - segmentToLandOn.startAngle\n    this.wheel.animation.stopAngle = segmentToLandOn.endAngle - (segmentTheta / 4);\n    this.wheel.startAnimation()\n    setTimeout(() => {\n      this.completedSpin = true\n      this.onSpinComplete.emit(null)\n    }, this.spinDuration * 1000)\n  }\n  ngAfterViewInit() {\n    const segments = this.items\n    // @ts-ignore\n    this.wheel = new Winwheel({\n      numSegments: segments.length,\n      segments,\n      innerRadius: this.innerRadius || 0,\n      outerRadius: (this.height / 2) - 20,\n      centerY: (this.height / 2) + 20,\n      textOrientation : this.textOrientation,\n      textAligment : this.textAlignment,\n      animation:\n      {\n        type: 'spinToStop',  // Type of animation.\n        duration: this.spinDuration, // How long the animation is to take in seconds.\n        spins: this.spinAmount  // The number of complete 360 degree rotations the wheel is to do.\n      }\n    })\n    // @ts-ignore\n    TweenMax.ticker.addEventListener(\"tick\", this.drawPointer.bind(this));\n  }\n\n  ngOnDestroy() {\n    // @ts-ignore\n    TweenMax.ticker.removeEventListener(\"tick\")\n  }\n\n  drawPointer(){\n    let c = this.wheel.ctx;\n    // Create pointer.\n    if (c) {\n      c.save();\n      c.lineWidth = 2;\n      c.strokeStyle = this.pointerStrokeColor;\n      c.fillStyle = this.pointerFillColor;\n      c.beginPath();\n      c.moveTo((this.width / 2) - 20, 2);\n      c.lineTo((this.width / 2) + 20, 2);\n      c.lineTo((this.width / 2), 42);\n      c.lineTo((this.width / 2) - 20, 2);\n      c.stroke();\n      c.fill();\n      c.restore();\n    }\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { NgxWheelComponent } from './ngx-wheel.component';\n\n\n\n@NgModule({\n  declarations: [NgxWheelComponent],\n  imports: [\n  ],\n  exports: [NgxWheelComponent]\n})\nexport class NgxWheelModule { }\n","/*\n * Public API Surface of ngx-wheel\n */\n\nexport * from './lib/ngx-wheel.component';\nexport * from './lib/ngx-wheel.module';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":[],"mappings":"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"}